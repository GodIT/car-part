## 什么是停车场系统

| 场景           | 原来                                               | 现在                                                         |
| :------------- | :------------------------------------------------- | :----------------------------------------------------------- |
| 车辆进停车场   | 手动抬杆                                           | 自动抬杆                                                     |
| 进场记录       | 人工记录                                           | 摄像头自动拍摄车牌自动录入                                   |
| 车辆驶出停车场 | 到出口时需停车向岗亭人员支付停车费                 | 准备打算离开停车场时手机提前在线支付(若已购买套餐进出都是来去自如，就像是自家停车场一样)，费用实时计算，车辆驾驶到停车场出口时系统会自动识别和判断该车牌是否已经缴费，已经缴费则自动抬杆，此过程车辆不需要停车，直接驶出 |
| 财务管理       | 停车费先由岗亭人员收取暂保管，每天晚上对账交给财务 | 每一笔停车费都直接到指定微信/支付宝/银行卡账号上，随时对地对账，数据报表一目了然 |

##### 能跟我讲讲这啥原理么？这个流程怎么实现的？我很懵

- 先说大概流程
  车辆进场
  —->车牌被摄像头拍摄到，摄像头识别出车牌
  —->向云端服务器发送数据(例如车牌号，进场时间，哪个停车场，哪个入口等数据)
  —->云端服务器接收到数据，记录到数据库
  —->车辆在停车场内停了2个小时(假设停车费5元/小时)
  —->车主办完事了，准备离开停车场，在手机上搜索自己车牌并支付相应停车费
  —->车辆出场，到停车场门口时车牌再次没摄像头拍摄到摄像头识别出车牌
  —->向云端服务器发送数据(例如车牌号，进场时间，哪个停车场，哪个入口等数据)
  —->云端服务器接收到数据，记录到数据库，根据现有数据判断该车辆是否已经付费
  —->车辆已经付费，匝道自动开启，整个过程很流畅，不需要停车
- 大概示意图如下

![img](https://www.showdoc.cc/server/api/common/visitfile/sign/2fba7f942aa53ac70ea2b0dd4bf18ed5?showdoc=.jpg)

##### 如果我也想搞一套这种系统，我需要准备哪些东西呢？

- 先买个摄像头，淘宝上就很多，建议买主流品牌的，价格一般在400-800(一般只支持大陆车牌)，要做国外的车牌识别话摄像头会在4000-6000左右/个(价格贵在集成的算法多了)，我个人推荐几个牌子的相机(臻识，华夏，千熠)
- 买个道闸，价格800-2000，看你要具体款式，价格不一样，淘宝上也很多，道闸时通用的(例如你有了一个相机，几乎可以对接任何一家道闸)
- 买个显示屏，当然这个不是必须的，你应该经常可以看到别人停车场门口有个显示屏，买这个纯属为了提高B格
- 直接配置到我们的系统就行了，就是这么简单



## 功能介绍

##### 附近停车场+导航

```
已经整合了高德导航SDK、会根据当前位置经纬度搜索附近指定N公里内的停车场，显示停车场位置，距离，评分，停车费等，按距离正序排序。选中停车场后可以查看停车场具体介绍，相册等资料，可以直接导航过
```

##### 车位预约

```
可以提前预约车位，超时会自动计费，可以提前免费取消预约，再也不担心找不到停车位了
```

##### 车场服务评价

```
可选评论功能，让使用车场服务后的车主对指定停车场停车服务做出评价和评论
```

##### 停车套餐

```
套餐种类自定，什么年卡，月卡，周卡，日卡，你时卡，分卡，秒卡都可以，就是这么灵活。支持用户自助在线购买指定停车场停车套餐，买后立即生效
```

##### 临时车牌和无牌进出(无需扫码)

```
当车辆无车牌或者无法识别车牌导致无法出入时，可直接手机上操作(微信公众号/APP)，申请临时通行，无需扫码
```

##### 远程开闸(支持预约开闸)

```
支持实时远程开闸，后台管理执行放行操作，停车场指定的道闸会自动开启。也支持指定在未来某一个时间点开启指定停车场某个道闸(即预约开闸)
```

##### 显示屏内容在线管理

```
车场出入口显示屏车位数显示，语音播报，广告文字，图片等在线管理
```

##### 即时通讯聊天功能/朋友圈(仿微信)

```
真正的即时通讯系统，性能和功能均仿照微信进行开发。支持搜索好友，添加好友，删除好友，进群，退群，系统消息，单聊，群聊等功能
```

##### 优惠券功能

```
支持派发优惠券，通用优惠券，商城优惠券，停车优惠券等，优惠券可全额或者部分抵扣停车费
```

##### 支付功能

```
支持支付宝/微信/银联等支付，账号配置即用，可以扩展其它任何第三方支付，超级灵活
```

##### 后台管理

```
停车场管理
出入口管理
硬件设备管理
停车记录管理
车辆管理
车辆套餐管理
车辆放行管理
收款账号管理
用户管理
角色管理
权限管理
....功能太多了，不再继续赘述，我们系统版本也会一直保持迭代更新
```

## 技术体系

##### 开发语言

- 云端系统: Java
- 硬件开发: C/C++

##### 开发框架和架构

- 前端:
  【`APP`】: flutter(原生混合框架，不是web封装，原生应用，一套代码直接生成原生Android和ios应用)，既不损失性能，也能降低开发成本。框架官网地址：https://flutterchina.club/

  【`小程序/h5/公众号`】：uni-app(底层框架Vue)，一套代码直接生成h5(直接部署公众号)，微信小程序，可以打包混合app，一箭三雕，经济又好用，也是市场主流的开发框架之一，框架官网地址：https://uniapp.dcloud.net.cn/

  【`后台管理`】：vue-element-admin，是目前国内外都很火的一套后台管理模板，我们采用的是typeScript版本，框架官网地址：https://panjiachen.github.io/vue-element-admin-site/zh/

- 服务端:
  【`java框架`】：[springboot2] [dubbo2.7.3] 官网地址：http://dubbo.apache.org/zh-cn/
  【`数据库对接`】：[mybatis]
  【`即时通讯IM`】：netty4
  【`数据库`】：MySQL(常规业务数据和重要数据存储),Mongodb(存储聊天内容),Redis(缓存高频非实时数据),Elasticsearch(海量数据全文检索和大型数据日志服务)
  【`负载均衡和转发`】:nginx

##### 动态分布式

- 微服务: 微服务治理框架我们采用了阿里巴巴的Dubbo框架，是目前市场上性能当之无愧的扛把子，每个功能都是一个独立的服务，让我们的应用高可用，提高容灾性，理论上只要你舍得出钱部署服务器，几百万用户真实流量是完全不成问题的。该框架支持灰度发布，让我们的服务更新迭代永不停机
  ![img](https://www.showdoc.cc/server/api/common/visitfile/sign/1af4f13b612d85d97fe3f7f0aadc5710?showdoc=.jpg)
- 海量数据优化: 数据库主从模式，微服务框架让主从更方便，数据读写分离，再也不担心高峰期和推广而来的海量并发了